<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
    "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">

<html lang="en" xml:lang="en" xmlns="http://www.w3.org/1999/xhtml">
<head>
  <title>ADL Workbench index page</title>
  <meta content="text/html; charset=us-ascii" http-equiv="Content-Type" />
  <link rel="stylesheet" type="text/css" href="awb.css" media="screen" />
  <meta name="generator" content="CoffeeCup HTML Editor (www.coffeecup.com)" />
</head>

<body>
  <div id="container">
    <table style="BACKGROUND-COLOR: #9cd2f8" border="0" cellspacing="0" cellpadding="0" width="100%">
      <tbody>
        <tr valign="top">
          <td valign="middle" width="152"><img border="0" alt="openEHR logo" src="images/openehr_logo_trans_bg.png"
          width="150" height="50" /></td>

          <td>
            <div id="header">
              <h1>ADL Workbench (AWB) - the test tool</h1>

              <p class="description">Download and Help pages</p>
            </div>
          </td>
        </tr>
      </tbody>
    </table>

    <div id="wrapper">
      <div id="content">
        <h2>Overview</h2>

        <p>TBD</p>

        <h2>Configuration</h2>

        <p>The only thing to configure for the test page is the location of the output files. These are various copies
        and serialisations of archetypes arranged to allow convenient diffing, so as to see the effect of round-trip
        compile-serialise cycle. To configure the location, select Tools &gt; Options, and set the diff files directory
        to your desired location. As shown <a href="images/test_diff_config.png">here</a>, the default location is
        under the platform standard user &#39;home&#39; location for the application, e.g. on Windows 7,
        /Users/$user/Local/$app_vendor/$app. If we denote the location you choose as $diff_test, the structure under
        this will be as follows:</p>

        <ul>
          <li>$profile, i.e. names of your repository profiles, e.g. &#39;CKM&#39;, &#39;ADL_1.5_test&#39;, etc</li>

          <li style="list-style: none; display: inline">
            <ul>
              <li>source</li>

              <li style="list-style: none; display: inline">
                <ul>
                  <li>orig</li>

                  <li>new</li>
                </ul>
              </li>

              <li>flat</li>

              <li style="list-style: none; display: inline">
                <ul>
                  <li>orig</li>

                  <li>new</li>
                </ul>
              </li>
            </ul>
          </li>
        </ul>

        <h2>Selecting archetypes</h2>

        <p>The test page allows you to batch process as many or as few archetypes as you like. You choose them via the check-box column, with higher levels of the hierarchy being choosable in blocks via the associated check box. You can experiment with this. <a href="images/test_page_arch_select.png">Here</a> is an example showing how the EHR EVALUATION group of archetypes was chosen with two mouse clicks, first the top checkbox, to uncheck all archetypes, then the EVALUATION check-box, to check all EVALUATION archetypes. You can continue checking / unchecking to get exactly the set you want. Once you are satisfied, you can hit the Go button to start the tests running. Each test that succeeds is indicated with a green tick, failed tests with a red cross, and non-applicability with 'n/a'.</p>

        <h2>What the tests do</h2>

        <p>The tests are as follows (names are in the columns).</p>

        <ul>
          <li><b>Parse</b>: perform a normal compile on the archetype; if there is only a legacy (.adl) file available,
          an initial .adl to .adls conversion will be done;</li>

          <li><b>Save src (orig)</b>: save the differential source (either what was converted from a .adl file, or the
          existing .adls file), to the directory $diff_test/$profile/source/orig;</li>

          <li><b>Save source (gen)</b>: serialise the compiled in-memory AOM archetype back out to ADL syntax, to the
          directory $diff_test/$profile/source/new;</li>

          <li><b>Save legacy</b>: if there is a .adl (ADL 1.4) file, save it to the directory , to the directory
          $diff_test/$profile/flat/orig, with a &#39;.adlf&#39; extension;</li>

          <li><b>Save flat</b>: serialise the in-memory flat archetype out to the directory , to the directory
          $diff_test/$profile/source/new;</li>

          <li><b>Compare src</b>: perform a simple compare between the original source (.adls) file contents and the
          serialised source form. An exact match indicates identical file length, and usually 100% faithful
          round-tripping.</li>
        </ul>

        <p>The file saving operations above enable the user to make comparisons between the original and serialised
        (i.e. &#39;saved&#39; in the sense of a normal editor tool) forms of a source archetype, and also between the
        original .adl and tool-generated flattened form of an archetype (remembering that all .adl files are
        essentially flat-form archetypes).</p>

        <h2>Viewing results</h2>

        <p>The files described above are saved in a way to make it convenient to look at diffs using a typical
        &#39;diff&#39; tool capable of diffing same-named files in sibling directories. This is useful to assess round-tripping correctness and to find bugs. For the examples here, we have used the <a href="http://winmerge.org/">open source Winmerge tool</a>, but you can use any tool you like.</p>

        <p>Based on the selection of EVALUATION archetypes in the CKM repository, here is the resulting directory structure. Below are some example diff views.</p>
      </div>
    </div><!--#include virtual="nav_footer_contents.html" -->
  </div>
</body>
</html>
